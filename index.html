<!DOCTYPE html>
<html>
  <head>
    <script src="dice.js"></script>
    <script>

    </script>
  </head>
  <body>
    <h1>Sword and Bones Dice Roller</h1>
    <div style="display: flex; gap: 10px;">
      <div style="flex: 1; gap: 10px;">
        <table style="border: 1px solid black; width: 200px;">
          <thead>
              <tr>
                  <th colspan="4" style="text-align: center;">Positive Dice Pool</th>
              </tr>
          </thead>
          <tr>
              <td>Ability:</td>
              <td><button onclick="document.getElementById('abilityDie').textContent = updateAbilityDie(1)">+</button></td>
              <td><button onclick="document.getElementById('abilityDie').textContent = updateAbilityDie(-1)">-</button></td>
              <td><span id="abilityDie">0</span></td>
          </tr>
          <tr>
            <td>Proficiency:</td>
            <td><button onclick="document.getElementById('proficiencyDie').textContent = updateProficiencyDie(1)">+</button></td>
            <td><button onclick="document.getElementById('proficiencyDie').textContent = updateProficiencyDie(-1)">-</button></td>
            <td><span id="proficiencyDie">0</span></td>
          </tr>
          <tr>
              <td>Boost:</td>
              <td><button onclick="document.getElementById('boostDie').textContent = updateBoostDie(1)">+</button></td>
              <td><button onclick="document.getElementById('boostDie').textContent = updateBoostDie(-1)">-</button></td>
              <td><span id="boostDie">0</span></td>
          </tr>
          <tr>
              <th colspan="4" style="text-align: center;">Negative Dice Pool</th>
          </tr>
          <tr>
              <td>Difficulty:</td>
              <td><button onclick="document.getElementById('difficultyDie').textContent = updateDifficultyDie(1)">+</button></td>
              <td><button onclick="document.getElementById('difficultyDie').textContent = updateDifficultyDie(-1)">-</button></td>
              <td><span id="difficultyDie">0</span></td>
          </tr>
          <tr>
            <td>Challenge:</td>
            <td><button onclick="document.getElementById('challengeDie').textContent = updateChallengeDie(1)">+</button></td>
            <td><button onclick="document.getElementById('challengeDie').textContent = updateChallengeDie(-1)">-</button></td>
            <td><span id="challengeDie">0</span></td>
          </tr>
          <tr>
              <td>Setback:</td>
              <td><button onclick="document.getElementById('setbackDie').textContent = updateSetbackDie(1)">+</button></td>
              <td><button onclick="document.getElementById('setbackDie').textContent = updateSetbackDie(-1)">-</button></td>
              <td><span id="setbackDie">0</span></td>
          </tr>
          <tr>
            <td colspan="4" style="text-align: center;"><button style="width: 100%;" onclick="rollDice()">Roll</button></td>
          </tr>
          <tr>
            <td colspan="2" style="text-align: center;">Outcome</td>
            <td colspan="2" style="text-align: center;">Fate</td>
          </tr>
          <tr>
            <td colspan="2" style="text-align: center;"><span id="result"> None </span></td>
            <td colspan="2" style="text-align: center;"><span id="swordBones"> None </span></td>
          </tr>
      </table>
      <br />
      <table style="border: 1px solid black; width: 200px;">
        <thead>
          <tr>
            <th colspan="2">Misc. Dice</th>
          </tr>
        </thead>
        <tr>
          <td style="text-align: left;"><button onclick="rollD100()">Roll D100</button></td>
          <td style="text-align: center;"><span id="d100Result"></span></td>
        </tr>
      </table>


      <p>Positive Roll: <span id="positiveResult"></span><br /> 
      Negative Roll: <span id="negativeResult"></span><br />
      Success count: <span id="successes"></span><br />
      Failure count: <span id="failures"></span><br />
      Sword count: <span id="swords"></span><br />
      Bones count: <span id="bones"></span></p>
      </div>
    </div>
    

    <script>
        function updateProficiencyDie(i) {
          let n = getProficiencyDie();
          n += i;
          if (n >= 0){
            setProficiencyDie(n);
          }
          return getProficiencyDie();
        }
        function updateBoostDie(i) {
          let n = getBoostDie();
          n += i;
          if (n >= 0){
            setBoostDie(n);
          }
          return getBoostDie();
        }
        function updateAbilityDie(i) {
          let n = getAbilityDie();
          n += i;
          if (n >= 0){
            setAbilityDie(n);
          }
          return getAbilityDie();
        }
        function updateDifficultyDie(i) {
          let n = getDifficultyDie();
          n += i;
          if (n >= 0){
            setDifficultyDie(n);
          }
          return getDifficultyDie();
        }
        function updateChallengeDie(i) {
          let n = getChallengeDie();
          n += i;
          if (n >= 0){
            setChallengeDie(n);
          }
          return getChallengeDie();
        }
        function updateSetbackDie(i) {
          let n = getSetbackDie();
          n += i;
          if (n >= 0){
            setSetbackDie(n);
          }
          return getSetbackDie();
        }
        function rollDice() {
          document.getElementById('positiveResult').textContent = rollPositiveDice();
          document.getElementById('negativeResult').textContent = rollNegativeDice();
          document.getElementById('successes').textContent = getSuccessCount();
          document.getElementById('failures').textContent = getFailureCount();
          document.getElementById('swords').textContent = getSwordCount();
          document.getElementById('bones').textContent = getBonesCount();
          
          s = getSuccessCount() - getFailureCount();
          if (s > 0){
            document.getElementById('result').textContent = "Success! " + s;
          } else if (s < 0) {
            document.getElementById('result').textContent = "Failure! " + (s * -1);
          } else {
            document.getElementById('result').textContent = "Tied! " + s;
          }

          s = getSwordCount() - getBonesCount();
          if (s > 0){
            document.getElementById('swordBones').textContent = "Swords: " + s;
          } else if (s < 0){
            document.getElementById('swordBones').textContent = "Bones: " + (s * -1);
          } else {
            document.getElementById('swordBones').textContent = "None";
          }
        }
        function rollD100() {
          document.getElementById('d100Result').textContent = roll100();
        }
    </script>
</body>
</html>
